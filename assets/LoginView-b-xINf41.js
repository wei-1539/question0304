import{T as h}from"./ToastMessage-HE4a_jpW.js";import{L as g}from"./LoadingComponent-SGC4biUL.js";import{_ as f,m as v,r as l,o as w,c as L,a as s,e as b,f as c,v as m,b as p,F as x,p as S,g as T}from"./index-ogWOfh8p.js";import{a as M,u as V}from"./axios-mkH_dabD.js";var E={VITE_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_PATH:"wei_rio",BASE_URL:"/question0304/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:y}=E,I={components:{ToastMessages:h,LoadingComponent:g},data(){return{isLoading:!1,user:{}}},created(){this.closeLoading()},methods:{closeLoading(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},1e3)},...v(V,["pushMessage"]),login(){const o=`${y}admin/signin`;this.isLoading=!0,M.post(o,this.user).then(e=>{const{token:i,expired:r}=e.data;document.cookie=`hexSchool = ${i};expires = ${new Date(r)}; path=/`,this.$router.push("/admin/product")}).catch(e=>{this.pushMessage({style:"danger",title:"登入失敗",content:e.response.data.message})}).finally(()=>{this.isLoading=!1})}}},t=o=>(S("data-v-ad85a7af"),o=o(),T(),o),D=t(()=>s("div",{class:"bg"},null,-1)),R={class:"container m-sm-0 p-sm-0 position-absolute top-50 start-50 translate-middle text-center"},U={class:"row justify-content-center"},k=t(()=>s("h1",{class:"h2 mb-3 font-weight-normal text-light"},"後台登入",-1)),B={class:"col-md-4 col-10"},C={class:"form-floating mb-3"},P=t(()=>s("label",{for:"username"},"Email address",-1)),q={class:"form-floating"},A=t(()=>s("label",{for:"password"},"Password",-1)),F=t(()=>s("button",{class:"btn btn-lg btn-primary w-100 mt-3",type:"submit"}," 登入 ",-1)),N=t(()=>s("p",{class:"mt-5 mb-3 text-light"},"© 2021~∞ - 六角學院",-1));function O(o,e,i,r,a,d){const u=l("LoadingComponent"),_=l("ToastMessages");return w(),L(x,null,[D,s("div",R,[s("div",U,[k,s("div",B,[s("form",{id:"form",class:"form-signin",onSubmit:e[2]||(e[2]=b((...n)=>d.login&&d.login(...n),["prevent"]))},[s("div",C,[c(s("input",{type:"email",class:"form-control",id:"username","onUpdate:modelValue":e[0]||(e[0]=n=>a.user.username=n),placeholder:"name@example.com",required:"",autofocus:""},null,512),[[m,a.user.username]]),P]),s("div",q,[c(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[1]||(e[1]=n=>a.user.password=n),placeholder:"Password",required:""},null,512),[[m,a.user.password]]),A]),F],32)])]),N]),p(u,{loadingStatus:a.isLoading},null,8,["loadingStatus"]),p(_)],64)}const G=f(I,[["render",O],["__scopeId","data-v-ad85a7af"]]);export{G as default};
